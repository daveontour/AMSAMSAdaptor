<?xml version="1.0" encoding="utf-8" ?>
<config>
	<FromAMSQueue>.\private$\fromams</FromAMSQueue>
	<ToAMSRequestQueue>.\private$\fromli</ToAMSRequestQueue>
	<ReadMessageLoopInterval>10</ReadMessageLoopInterval>
	<FromToken>32b8ef7a-0a16-4b4a-9e01-799960c91e0e</FromToken>
	<ToToken>32b8ef7a-0a16-4b4a-9e01-799960c91e0e</ToToken>
	<AirportCode>IXE</AirportCode>
	<FromAMSWebServiceURL>http://localhost:9191/SITAAMSIntegrationService/v2/SITAAMSIntegrationService/</FromAMSWebServiceURL>
	<ToAMSWebServiceURL>http://localhost:9191/SITAAMSIntegrationService/v2/SITAAMSIntegrationService/</ToAMSWebServiceURL>


	<InitAircraftTypes>false</InitAircraftTypes>
	<InitAircraft>false</InitAircraft>
	<InitAirports>false</InitAirports>
	<InitAirlines>false</InitAirlines>
	<InitAreas>false</InitAreas>
	<InitCheckIns>false</InitCheckIns>
	<InitStands>false</InitStands>
	<InitGates>true</InitGates>

	<InitFlights>false</InitFlights>
	<StartFromHours>-1000</StartFromHours>
	<StartFromHours>24</StartFromHours>


	<Handlers>
		<Handler class="HandlerFlightUpdate" messageType="FlightUpdatedNotification" name="Default Flight Update Handler" enabled="true"/>
		
		<!-- Multiple types of the same type of Handler can be used if different configurations are needed-->
		<Handler class="HandlerFlightUpdate" messageType="FlightUpdatedNotification" name="Flight Update Handler with filtering" enabled="true">

			<!-- Pass/NoPass filter work with any message type -->
			<!-- Uses XPATH of the message to detemine wheter it meets the filer -->
			<PassFilter>.//ams:FlightId/ams:AirlineDesignator[@codeContext='IATA' and  contains(text(), 'EK')]</PassFilter>
			<PassFilter>.//ams:FlightId/ams:AirlineDesignator[@codeContext='IATA' and  contains(text(), 'QF')]</PassFilter>
			<NoPassFilter>.//ams:FlightId/ams:AirlineDesignator[@codeContext='IATA' and  contains(text(), 'QR')]</NoPassFilter>

			<!-- Transformers are type specific -->
			<Transformer class="TransformerFlightRemoveProperties">
				<TransformerConfig>
					<!-- List of properties to remove -->
					<Property propertyName="S---_AlternateRemark2"/>
					<Property propertyName="S---_AlternateRemark1"/>
				</TransformerConfig>
			</Transformer>
			<Transformer class="TransformerFlightAddProperties">
				<TransformerConfig>
					<!-- List of properties to add -->
					<Property propertyName="OriginalFlightNature" type="alternateProperty" alternatePropertyName="Nature" />
					<Property propertyName="TimeMessageReceived" type="dateTime" dateTimeFormat="HH:mm:ss" />
					<Property propertyName="TargetAirport" type="fixed" value="HEL" />
				</TransformerConfig>
			</Transformer>
			<Transformer class="TransformerFlightReMapper">
				<TransformerConfig>
					<Property propertyName="S---_LastArrivalSource" type="alternateProperty" alternatePropertyName="S---_LastArrivalSource_AltSource" />
					<Property propertyName="Nature" type="fixed" value="Arrival" />
					<Property propertyName="AirportIATA" type="fixed" value="DJB" />
				</TransformerConfig>
			</Transformer>
			
			<!-- Remove one or more custom table -->
			<Transformer class ="TransformerFlightRemoveCustomTable">
				<Property tableName="customTableNameToRemove" />
				<Property tableName="customSensitiveData" />
			</Transformer>
			
			<Transformer class ="TransformerFlightRemoveActivities" />
			<Transformer class ="TransformerFlightRemoveEvents" />
			<Transformer class ="TransformerFlightRemoveVehicleSlots" />
			
			<!-- Convert the CheckInSlot data to a custom table format-->
			<Transformer class ="TransformerFlightCheckInSlotToTable" />

			<Transformer class="TransformerFlightLookupReMapper">
				<TransformerConfig>
					<!-- 
				The property we want to change is propertyName="ScheduledTime"
				We want to change it by adding a time offset to it timeOffset="true"
				
				The time offset will be determined by looking up the offset value in a file  fileName="flighttimes.csv"
				The key field in the lookup file is indexField="0" 
				The value field in the lookup file is valueField="1"
				
				The key for the lookup is the value of lookupPropertyName="AirportIATA" 
				The base for the offset is calcuated from the value of referencePropertyName="ScheduledTime"
				
				The format of the time is timeFormat="yyyy-MM-ddTHH:mm:ssZ" 
				-->
					<!--<Property propertyName="ScheduledTime"  lookupPropertyName="AirportIATA" referencePropertyName="ScheduledTime" timeOffset="true" fileName="flighttimes.csv" indexField="0" valueField="1" timeFormat="yyyy-MM-ddTHH:mm:ssZ"/> -->
				</TransformerConfig>
			</Transformer>
		</Handler>
		<Handler class="HandlerFlightDelete" messageType="FlightDeletedNotification" name="Default FlightDeleted Update Handler" enabled="true"/>
		<Handler class="HandlerFlight" messageType="Flight" name="Default Flight Update Handler" enabled="true"/>
		
		<Handler class="HandlerCheckInUpdate" messageType="CheckInUpdatedNotification" name="Default CheckIn Update Handler" enabled="true"/>
		<Handler class="HandlerCheckInCreate" messageType="CheckInCreatedNotification" name="Default CheckIn Created Handler" enabled="true"/>
		<Handler class="HandlerCheckIn" messageType="CheckIn" name="Default CheckIn Handler" enabled="true"/>
		
		<Handler class="HandlerStandUpdate" messageType="StandUpdatedNotification" name="Default Stand Update Handler" enabled="true"/>
		<Handler class="HandlerStandCreate" messageType="StandCreatedNotification" name="Default Stand Created Handler" enabled="true"/>
		<Handler class="HandlerStand" messageType="Stand" name="Default Stand Handler" enabled="true"/>
		
		<Handler class="HandlerGateUpdate" messageType="GateUpdatedNotification" name="Default Gate Update Handler" enabled="true"/>
		<Handler class="HandlerGateCreate" messageType="GateCreatedNotification" name="Default Gate Created Handler" enabled="true"/>
		<Handler class="HandlerGate" messageType="Gate" name="Default Gate Handler" enabled="true"/>
		
		<Handler class="HandlerAreaUpdate" messageType="AreaUpdatedNotification" name="Default Area Update Handler" enabled="true"/>
		<Handler class="HandlerAreaCreate" messageType="AreaCreatedNotification" name="Default Area Created Handler" enabled="true"/>
		<Handler class="HandlerArea" messageType="Area" name="Default Area Handler" enabled="true"/>

		<Handler class="HandlerAirlineUpdate" messageType="AirlineUpdatedNotification" name="Default Airline Update Handler" enabled="true"/>
		<Handler class="HandlerAirlineCreate" messageType="AirlineCreatedNotification" name="Default Airline Created Handler" enabled="true"/>
		<Handler class="HandlerAirlineDelete" messageType="AirlineDeletedNotification" name="Default Airline Deleted Handler" enabled="true"/>
		<Handler class="HandlerAirline" messageType="Airline" name="Default Airline Handler" enabled="true"/>

		<Handler class="HandlerAirportUpdate" messageType="AirportUpdatedNotification" name="Default Airport Update Handler" enabled="true"/>
		<Handler class="HandlerAirportCreate" messageType="AirportCreatedNotification" name="Default Airport Created Handler" enabled="true"/>
		<Handler class="HandlerAirportDelete" messageType="AirportDeletedNotification" name="Default Airport Deleted Handler" enabled="true"/>
		<Handler class="HandlerAirport" messageType="Airport" name="Default Airport Handler" enabled="true"/>

		<Handler class="HandlerAircraftUpdate" messageType="AircraftUpdatedNotification" name="Default Aircraft Update Handler" enabled="true"/>
		<Handler class="HandlerAircraftCreate" messageType="AircraftCreatedNotification" name="Default Aircraft Created Handler" enabled="true"/>
		<Handler class="HandlerAircraftDelete" messageType="AircraftDeletedNotification" name="Default Aircraft Deleted Handler" enabled="true"/>
		<Handler class="HandlerAircraft" messageType="Aircraft" name="Default Aircraft Handler" enabled="true"/>

		<Handler class="HandlerAircraftTypeUpdate" messageType="AircraftTypeUpdatedNotification" name="Default AircraftType Update Handler" enabled="true"/>
		<Handler class="HandlerAircraftTypeCreate" messageType="AircraftTypeCreatedNotification" name="Default AircraftType Created Handler" enabled="true"/>
		<Handler class="HandlerAircraftTypeDelete" messageType="AircraftTypeDeletedNotification" name="Default AircraftType Deleted Handler" enabled="true"/>
		<Handler class="HandlerAircraftType" messageType="AircraftType" name="Default AircraftType Handler" enabled="true"/>
	</Handlers>
</config>
